# 软件主体

**eSearch** 并不像其他软件一样有一个主要窗口，比如音乐软件就有一个主要的音乐播放窗口。

你最常使用的应该是*截屏窗口*，框选屏幕内容。而文字识别又会打开另一个窗口，我一般称他为*主页面*，你也可以叫他编辑器，不管怎样，我们都知道这是用来编辑文字的。还有*录屏窗口*、_贴图窗口_、_屏幕翻译窗口_、*高级图片编辑窗口*和*设置窗口*。这些窗口可能有小窗口，可能不止一个，但这不是我们在使用时说关心的，我们只需要知道 **eSearch** 功能丰富，基本一个功能有一个窗口界面。而这些窗口基本可以在截屏窗口中打开。

你运行**eSearch**时，除了弹出的通知提醒程序已运行，在*托盘*（一般在桌面右下角或右上角，看时间的地方）处会显示一个图标。你可以右键点击它，进行图片搜索、打开设置或退出程序。

除了通过托盘截屏，你还可以通过快捷键（默认是<kbd>Alt</kbd>+<kbd>C</kbd>或<kbd>⌥</kbd><kbd>C</kbd>）打开截屏窗口。

## 自动搜索

当你选中一段文字时，**eSearch** 在主页面打开这个文字。如果没有选中文字，**eSearch** 会打开截屏。

<details>
<summary>Wayland</summary>
Wayland 环境下无法获取选中文字，在KDE下甚至会造成按键锁定，见 https://github.com/xushengfeng/eSearch/issues/248#issuecomment-2236211435"> GitHub issue
</details>

---

下面是复杂用法，一般很少接触。

## cli

**eSearch** 提供了一个命令行界面，你可以在命令行中输入命令来执行一些操作。Linux 和 macOS 都可以直接在命令行运行`e-search`（如果没有，请尝试`esearch`），Windows 需要定义环境变量才可以在 powershell 中运行。

`--`加上命令表示表示命令名，`-`表示缩写，我会把他们写在一起，两者等效，有的命令无缩写。参数可以这样表示：` -t Hello``-t "Hello World" `或`-t="Hello World"`。

`-h,--help`（帮助），`-v,--version`（版本），`--config`（打开配置文件）,`--dev`（调试模式/开发者模式）

如：
`e-search --help`或`e-search -v`

可以在不打开截屏界面的情况下使用部分功能，这时可以指定图片位置，否则自动截取全屏。

通过`-i,--input`指定图片位置（可选）。

`--delay`指定截屏延迟时间（毫秒）

### 保存

`-s,--save`保存到路径或剪贴板。

后面可以跟`-p,--path`指定保存路径，`--clipboard`保存到剪贴板。

如果不指定路径，依次尝试快速截屏位置、上次保存位置。文件名在设置中指定。

不会自动创建路径中不存在的文件夹。

如：

```shell
e-search --save --path /path/to/save
e-search -s --clipboard
e-search --save --path /path/to/save --delay 500
```

<!-- todo 可指定文件名 -->

后面可跟`-n`，指定连拍次数。`--dt`指定间隔时间，单位为毫秒，默认 100 毫秒。

如：

```shell
# 连拍 3 次，间隔 500 毫秒，保存到 /path/to/save/默认文件名 文件夹中，文件名用序号表示
e-search --save --path /path/to/save -n 3 --dt 500
```

### 文字识别

`-o,--ocr`

后面可跟`--engine`指定引擎。

可跟`--search`或`--trans`指定打开主页面时进行搜索还是翻译。不指定时[自动判断](editor.md#页面模式)。

如：

```shell
e-search --ocr --engine 默认 --trans
```

### 以图搜图

`-m,--img`

后面参数同文字识别。

### 贴图

`-d,--ding`

在光标位置贴图。

### 打开主页面并显示文字

`-t,--text`

可指定`--search`或`--trans`。

如：

```shell
e-search --text="Hello World" --trans
```

## 框选后默认操作

见[截屏](clip.md#框选后默认操作)

这些操作不仅可以设置为默认，还可以通过快捷键设置临时操作。

默认情况下，按下<kbd>Alt</kbd>+<kbd>C</kbd>打开截屏窗口，我们手动框选，手动点击功能按钮。

设置好快捷键后，比如我设置复制为<kbd>Alt</kbd>+<kbd>X</kbd>，按下快捷键后，框选，自动复制。

在 设置-快捷键 中设置，注意与截屏界面*功能快捷键*的区别。截屏*功能快捷键*在截屏界面显示后才使用（比如<kbd>Alt</kbd>+<kbd>C</kbd>打开窗口、框选、<kbd>Ctrl+C</kbd>复制），框选后默认操作快捷键全局生效，一步到位（直接<kbd>Alt</kbd>+<kbd>X</kbd>，复制）。他们都在 设置-快捷键 中设置，请小心区分。

## 便携版（绿色版）

**eSearch** 还有便携版，可以把它安装到 U 盘，不需要安装到系统。

下载对应平台的压缩包版本，此时已经可以运行软件了，但配置仍保存在系统中。我们需要的绿色版配置应该保存在下载的文件夹中。

可以使用自定义配置目录，见[配置](setting.md#自定义配置目录)。把配置目录设置为相对路径，如`./config`。

更简单的方法是在运行目录下创建`portable`文件夹，这样软件就自动使用该目录作为配置目录。自定义配置目录的优先级更高。

---

## 版本说明

**eSearch** 版本号使用点`.`分隔，分别表示大版本、中版本、小版本，点不具有数学意义，你可以把他看成逗号。版本号更大的功能更多。

<details>
<summary>版本比较规则</summary>
从大版本到小版本依次比较。相等时，继续比较下一位。

_14_.x.x>_13_.x.x

14._11_.x>14._9_.x

14.11._2_>14.11._1_

</details>

大版本（n.x.x）：有很多功能添加，一些操作方式优化，底层框架可能升级。这是相对于上一个大版本来说的，相当于中版本和小版本的累积更新。

中版本（x.n.x）：小功能添加和优化

小版本（x.x.n）：问题修复，可能会伴随一些功能的更新

开发测试版（x.x.x-beta）：测试版，可能有一些功能缺失，可能有一些 bug，不建议使用

原始代码编译：需要按照[开发指南](../develop/start.md)编译，是最新的版本，与我现在开发的版本一致。

大版本 2 周左右（也许吧，有时短有时长）发布，中版本一周左右发布，小版本由于是用来修复问题，所以发现特别大的问题后会在几天内发布。

如果我因为备考或其他原因暂停代码开发，代码超过一周没有更新，也会发布一个新版本。所以最新发布的版本和最新代码间隔一周左右。

你可以在设置调节软件更新频率：更新大版本、更新中小版本、更新开发版和手动检查更新。

上面的信息仅供参考，具体更新内容、频率以实际为准。

## 尝鲜功能

有一些功能正在开发中，属于半成品，为了不让他影响到正常使用，我把他们隐藏起来，有一些在截屏工具栏隐藏，你需要在设置中把他拖到显示区，有一些需要在设置中打开“开发者模式”才显示。

开发者模式会弹出控制台，提示可能出现的错误。
